test-send.cpp отправляет
test-recv.cpp получает

prg2.py тоже отправляет
prg1.py принимает

-----
понимание того как это должно быть.
вот есть цикл C обработки сетевых пакетов, что у mongoose что у asio.
и хорошо когда он совпадает с основным  вычислительным циклом т.е. откуда мы либой пользуемся.
сообразно надо - либо совмещать эти вещи, либо если не совмещается (как в qt) то уже тогда использовать адаптеры доступа кросс-потоковые. увсе.